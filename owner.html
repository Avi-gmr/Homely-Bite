<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner Panel - Protected</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #2c3e50; color: #333; padding: 20px; padding-bottom: 80px; margin: 0; }
        
        /* Login Overlay Styling */
        .login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #2c3e50; z-index: 2000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: white;
        }
        .login-box {
            background: white; padding: 30px; border-radius: 12px;
            text-align: center; width: 80%; max-width: 300px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .login-box input {
            width: 100%; padding: 12px; margin: 15px 0;
            border: 2px solid #ddd; border-radius: 6px; box-sizing: border-box;
            font-size: 16px; text-align: center;
        }
        .login-box button {
            width: 100%; padding: 12px; background: #3498db;
            color: white; border: none; border-radius: 6px;
            font-size: 16px; font-weight: bold; cursor: pointer;
        }
        .error-msg { color: red; font-size: 13px; display: none; margin-top: 10px; }

        /* Main Content Styling (Hidden initially) */
        #protected-content { display: none; }

        .admin-card { max-width: 700px; margin: 40px auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        h2 { text-align: center; color: #2c3e50; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: #f8f9fa; color: #666; font-size: 14px; text-transform: uppercase; }
        th, td { padding: 15px; border-bottom: 1px solid #ddd; text-align: left; vertical-align: middle; }
        .driver-img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid #ddd; }
        .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; color: white; font-weight: bold; }
        .btn-approve { background: #2ecc71; }
        .btn-reject { background: #e74c3c; margin-left: 5px; }
        .empty-state { text-align: center; color: #777; padding: 40px; }
        .badge { padding: 5px 10px; border-radius: 20px; font-size: 12px; font-weight: bold; }
        .badge-pending { background: #fff3cd; color: #856404; }
        .badge-approved { background: #d4edda; color: #155724; }

        /* Credits & Navbar */
        .credits-section { text-align: center; margin-top: 40px; color: rgba(255,255,255,0.7); }
        .credits-section h4 { margin: 0; color: white; }
        .credits-section small { font-size: 11px; opacity: 0.7; }
        
        .navbar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid #ddd; display: flex; justify-content: space-around; padding: 10px 0; z-index: 1000; }
        .nav-item { text-decoration: none; color: #888; text-align: center; font-size: 10px; }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 3px; }
        .nav-item.active { color: #2c3e50; font-weight: bold; }
    </style>
</head>
<body>

<div id="login-overlay" class="login-overlay">
    <div class="login-box">
        <i class="fas fa-user-lock" style="font-size: 40px; color: #3498db; margin-bottom: 10px;"></i>
        <h3 style="color:#333; margin:0;">Owner Login</h3>
        <p style="color:#777; font-size:13px; margin-top:5px;">Enter password to verify</p>
        
        <input type="password" id="passwordInput" placeholder="Password">
        <button onclick="checkPassword()">Unlock Panel</button>
        <p id="error-msg" class="error-msg">‚ùå Wrong Password!</p>
        
        <a href="index.html" style="display:block; margin-top:15px; color:#999; text-decoration:none; font-size:12px;">‚Üê Go Back Home</a>
    </div>
    
    <div class="credits-section" style="margin-top:20px;">
        <h4>Created by Suraj</h4>
        <small>Hosted by Shaurya</small>
    </div>
</div>

<div id="protected-content">
    <div class="admin-card">
        <h2>üõ† Owner Verification Panel</h2>
        
        <div id="content-area">
            <table id="admin-table">
                <thead>
                    <tr>
                        <th>Photo</th>
                        <th>Driver Details</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="list-body"></tbody>
            </table>
        </div>
        
        <div id="no-data" class="empty-state" style="display: none;">No pending registrations found.</div>
        <button onclick="clearData()" style="margin-top:20px; font-size:12px; color:#999; background:none; border:none; cursor:pointer; text-decoration:underline;">Reset System (Clear All Data)</button>
    </div>

    <div class="credits-section">
        <h4>Created by Suraj</h4>
        <small>Hosted by Shaurya</small>
    </div>

    <div class="navbar">
        <a href="index.html" class="nav-item">
            <i class="fas fa-user-plus"></i> Register
        </a>
        <a href="dashboard.html" class="nav-item">
            <i class="fas fa-motorcycle"></i> Delivery
        </a>
        <a href="owner.html" class="nav-item active">
            <i class="fas fa-user-shield"></i> Owner
        </a>
    </div>
</div>

<script>
    // Password Logic
    function checkPassword() {
        const pass = document.getElementById('passwordInput').value;
        const errorMsg = document.getElementById('error-msg');
        
        if (pass === "suraj") {
            document.getElementById('login-overlay').style.display = 'none';
            document.getElementById('protected-content').style.display = 'block';
            loadData(); // Load data only after login
        } else {
            errorMsg.style.display = 'block';
        }
    }

    // Existing Data Logic
    function loadData() {
        const body = document.getElementById('list-body');
        const registered = localStorage.getItem('hb_registered');
        const status = localStorage.getItem('hb_status');
        const name = localStorage.getItem('hb_name');
        const age = localStorage.getItem('hb_age');
        const pic = localStorage.getItem('hb_photo') || 'https://via.placeholder.com/60';

        if(registered === 'true') {
            document.getElementById('no-data').style.display = 'none';
            document.getElementById('admin-table').style.display = 'table';
            
            let statusBadge = status === 'pending' 
                ? '<span class="badge badge-pending">Pending</span>' 
                : '<span class="badge badge-approved">Approved</span>';

            let actionButtons = status === 'pending' 
                ? `<button class="btn btn-approve" onclick="updateStatus('approved')">Approve</button>
                   <button class="btn btn-reject" onclick="updateStatus('rejected')">Reject</button>`
                : `<span style="color:green; font-weight:bold;">Verified</span>`;

            body.innerHTML = `
                <tr>
                    <td><img src="${pic}" class="driver-img"></td>
                    <td><div style="font-weight:bold;">${name}</div><small>Age: ${age}</small></td>
                    <td>${statusBadge}</td>
                    <td>${actionButtons}</td>
                </tr>`;
        } else {
            document.getElementById('admin-table').style.display = 'none';
            document.getElementById('no-data').style.display = 'block';
        }
    }

    function updateStatus(newStatus) {
        if(newStatus === 'rejected') {
            if(confirm('Reject and delete this driver?')) { localStorage.clear(); loadData(); }
        } else {
            localStorage.setItem('hb_status', newStatus); loadData();
        }
    }

    function clearData() { if(confirm("Delete all data?")) { localStorage.clear(); location.reload(); } }
</script>
</body>
</html>
